<!-- Extracted from index.html lines 80-202 -->

      <div id="sidebar" class="side-panel side-panel--right">
                        <div class="panel-section" id="intensityPanel">
          <div class="panel-header panel-header--image">
            <div class="control-heading" title="lookup table">Image</div>
            <div class="panel-actions" aria-label="View controls">
              <button type="button" id="resetViewButton" class="history-button" aria-label="Recenter view" title="Home">
                <span class="history-icon history-icon-home" aria-hidden="true"></span>
                <span class="sr-only">Recenter</span>
              </button>
              <button type="button" id="rotateLeftButton" class="history-button" aria-label="Rotate left 90 degrees" title="Rotate left">
                <span class="history-icon history-icon-rotate-left" aria-hidden="true"></span>
                <span class="sr-only">Rotate left</span>
              </button>
              <button type="button" id="rotateRightButton" class="history-button" aria-label="Rotate right 90 degrees" title="Rotate right">
                <svg class="history-icon history-icon-rotate-right-svg" viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M6 12a6 6 0 0 1 10.24-4.24" />
                  <path d="M16 4l1.8 4.4-4.4-1.8" />
                </svg>
                <span class="sr-only">Rotate right</span>
              </button>
            </div>
            <label class="toggle panel-toggle" title="Show image">
              <input type="checkbox" id="imageVisibilityToggle" checked />
              <span class="toggle-switch"></span>
            </label>
          </div>
          <div class="panel-body">
            <div class="image-hover-info" aria-hidden="true">
              <span id="hoverValueDisplay">Y: --, X: --, Val: --</span>
              <span id="hoverCoordDisplay"></span>
            </div>
            <div class="control">
              <div class="histogram-surface">
                <canvas id="histogram" class="histogram" width="220" height="80" data-tooltip-dynamic="true"></canvas>
              </div>
                          </div>
            <div class="control slider-inline">
              <span class="control-heading control-heading--lower">gamma</span>
              <div class="slider-row">
                <div class="slider" data-slider-id="gamma" data-slider-type="single">
                  <input type="range" id="gamma" min="10" max="600" value="100" />
                </div>
                <div class="number-field" data-number-id="gammaInput">
                  <input type="number" id="gammaInput" min="0.10" max="6.00" step="0.05" value="1.00" />
                </div>
              </div>
            </div>
                      <div class="control">
              <div class="dropdown" data-dropdown-id="imageNavigator" data-loop="true" data-count-label="images" data-apply="confirm">
                <select id="imageNavigator"></select>
              </div>
            </div>
</div>
        </div>
                <div class="panel-section" id="segmentationPanel">
          <div class="control">
            <div class="control-heading">Omnipose Model</div>
            <div class="dropdown" data-dropdown-id="segmentationModel" data-loop="true" data-count-label="models" data-tooltip-disabled="true">
              <select id="segmentationModel"></select>
            </div>
            <input type="file" id="segmentationModelFile" accept=".pth,.pt,.onnx,.ckpt" style="display:none" />
          </div>
          <div class="control-heading">Parameters</div>
          <div class="control slider-inline">
            <span class="control-heading control-heading--lower">niter</span>
            <div class="slider-row">
              <div class="slider" data-slider-id="niter" data-slider-type="single">
                <input type="range" id="niterSlider" min="-1" max="400" step="1" value="-1" />
              </div>
              <div class="number-field" data-number-id="niterInput">
                <input type="text" id="niterInput" min="-1" max="400" step="1" value="auto" />
              </div>
            </div>
          </div>
          <div class="control slider-inline">
            <span class="control-heading control-heading--lower">mask</span>
            <div class="slider-row">
              <div class="slider" data-slider-id="maskThreshold" data-slider-type="single">
                <input type="range" id="maskThresholdSlider" min="-5" max="5" step="0.1" value="-2" />
              </div>
              <div class="number-field" data-number-id="maskThresholdInput">
                <input type="number" id="maskThresholdInput" min="-5" max="5" step="0.1" value="-2.0" />
              </div>
            </div>
          </div>
          <div class="control slider-inline">
            <span class="control-heading control-heading--lower">flow</span>
            <div class="slider-row">
              <div class="slider" data-slider-id="flowThreshold" data-slider-type="single">
                <input type="range" id="flowThresholdSlider" min="0" max="5" step="0.1" value="0" />
              </div>
              <div class="number-field" data-number-id="flowThresholdInput">
                <input type="text" id="flowThresholdInput" min="0" max="5" step="0.1" value="0.0" />
              </div>
            </div>
          </div>          <div class="control">
            <div class="control-heading">Segmentation Mode</div>
            <div id="segModeToggle" class="kernel-toggle segmented-toggle seg-mode-toggle" role="group" aria-label="Segmentation mode">
              <button type="button" class="kernel-option" data-seg-mode="cluster" aria-label="DBSCAN cluster" title="DBSCAN clustering">
                <span class="seg-mode-icon seg-mode-icon-dbscan" aria-hidden="true"></span>
              </button>
              <button type="button" class="kernel-option" data-seg-mode="affinity" aria-label="Affinity segmentation" title="Affinity segmentation">
                <span class="seg-mode-icon seg-mode-icon-affinity" aria-hidden="true"></span>
              </button>
              <button type="button" class="kernel-option" data-seg-mode="none" aria-label="Neither" title="No clustering/affinity">
                <span class="seg-mode-icon seg-mode-icon-cc" aria-hidden="true"></span>
              </button>
            </div>
          </div>

          <div class="control seg-action-row">
            <button id="segmentButton" class="accent-button">Segment</button>
            <button id="clearMasksButton" class="accent-button" title="Clear all masks (Cmd/Ctrl+X)">Clear</button>
          </div>
          <div id="segmentStatus" class="status"></div>
          <div class="control">
          </div>
          <div class="control-heading">Mask Display</div>
          <div class="control toggle-group">
            <label class="toggle">
              <input type="checkbox" id="autoNColorToggle" checked />
              <span class="toggle-switch"></span>
              <span class="toggle-label">N-Color Masks</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="affinityGraphToggle" />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Affinity Graph</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="pointsOverlayToggle" disabled />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Final Points</span>
            </label>
            <label class="toggle" id="vectorOverlayRow">
              <input type="checkbox" id="vectorOverlayToggle" disabled />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Displacement Vectors</span>
            </label>
          </div>
          <div class="control-heading">Network Output Display</div>
          <div class="control toggle-group" id="overlayControls">
            <label class="toggle">
              <input type="checkbox" id="flowOverlayToggle" disabled />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Flow</span>
            </label>
            <label class="toggle">
              <input type="checkbox" id="distanceOverlayToggle" disabled />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Distance</span>
            </label>
          </div>
        </div>
        <div class="panel-section" id="systemInfoPanel">
          <div class="control-heading">Server Info</div>
          <div class="control system-info">
            <div class="system-row">
              <span class="system-label">RAM</span>
              <span id="systemRam" class="system-value">--</span>
            </div>
            <div class="system-row">
              <span class="system-label">CPU</span>
              <span id="systemCpu" class="system-value">--</span>
            </div>
            <div class="system-row">
              <span class="system-label">GPU</span>
              <span id="systemGpu" class="system-value">--</span>
            </div>
          </div>
          <div class="control toggle-group">
            <label class="toggle">
              <input type="checkbox" id="useGpuToggle" />
              <span class="toggle-switch"></span>
              <span class="toggle-label">Use GPU</span>
            </label>
          </div>
        </div>
        <div class="hint">
          Use B/G/I to switch tools, [ ] to resize brush, digits 0-9 set label. Hold Space to pan, scroll to zoom, W/S to traverse directory.
        </div>
      </div>
